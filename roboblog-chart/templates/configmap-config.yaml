apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "roboblog.fullname" . }}-config
  labels:
    {{- include "roboblog.labels" . | nindent 4 }}
data:
  config.yml: |
    # Blog Automation Configuration
    # This file contains settings for the automated blog post generation system

    # GitHub Configuration
    github:
      # Your GitHub username
      username: {{ .Values.config.github.username | quote }}

      # Repository filters (optional)
      # Only commits from these repos will be included
      # Leave empty to include all repos
      repo_filters: {{ .Values.config.github.repoFilters | toYaml | nindent 8 }}

      # Repositories to exclude from blog posts
      exclude_repos: {{ .Values.config.github.excludeRepos | toYaml | nindent 8 }}

    # LLM Configuration
    llm:
      # LLM provider: "openai", "anthropic", "ollama", or "openrouter"
      provider: {{ .Values.config.llm.provider | quote }}

      # API key (use environment variable for security)
      # Set this in .env file as: LLM_API_KEY=your_key_here
      api_key_env: {{ .Values.config.llm.apiKeyEnv | quote }}

      # Model to use for generating blog posts
      model: {{ .Values.config.llm.model | quote }}

      # Article style/tone
      article_style: {{ .Values.config.llm.articleStyle | quote }}

      # Maximum tokens for generation
      max_tokens: {{ .Values.config.llm.maxTokens }}

      # Temperature for creativity (0.0-1.0)
      temperature: {{ .Values.config.llm.temperature }}

    # Automation Settings
    automation:
      # Number of days to look back for commits
      lookback_days: {{ .Values.config.automation.lookbackDays }}

      # Minimum commits required to generate a post
      min_commits: {{ .Values.config.automation.minCommits }}

      # Maximum commits to include in a single post
      max_commits: {{ .Values.config.automation.maxCommits }}

      # Post frequency (REFERENCE ONLY)
      frequency: {{ .Values.config.automation.frequency | quote }}

    # Blog Post Settings
    blog:
      # Post title template
      title_template: {{ .Values.config.blog.titleTemplate | quote }}

      # Include code snippets in posts
      include_code_snippets: {{ .Values.config.blog.includeCodeSnippets }}

      # Maximum length of code snippets (lines)
      max_snippet_lines: {{ .Values.config.blog.maxSnippetLines }}

      # Include commit statistics
      include_stats: {{ .Values.config.blog.includeStats }}

      # Tags to automatically apply
      default_tags: {{ .Values.config.blog.defaultTags | toYaml | nindent 8 }}

      # Author name for posts
      author: {{ .Values.config.blog.author | quote }}
